Tom,

I've been giving our test resources scheme a great deal of thought over the weekend, and I believe I've had a revelation, and it is as follows...

The concept or test resources is flat out wrong!  Why?  Because what we're trying to do is perform book-keeping that may or may not be a reflection of reality, and no matter how hard we try to make it a reflection of reality, it can and does get out of sync with reality.  (Rob was facing this very problem just before he left.)  What we have to do to solve our resource problems is look to the *real* sources of truth concerning those resources.  Let's do our real-world examples...

1) CRS Licenses -- We want to run a CRS test, but we don't want it to fail due to there being no license.  How do we solve this problem?  The *right* answer is to *sense* our failure to use the CRS host due to insuficient licenses.  If that happens, we try a different host, or we defer the test and go do some other test.  Now we're avoiding unnecessary test failures due to insufficient licenses, and we're not trying (and often failing) to count licenses.

2) 360 Visits -- A visit can be used by one and only one 360 test at any given time.  How do we solve this problem?  The *right* answer is to *sense* if the 360 host has the visit open.  If it does, we defer the test.  If it doesn't, then we proceed.  Now, we do have to solve a race-condition here.  Again, I think the answer is to *sense* test failure due to the visit already being open.  If it's already open when the test is ran, then we don't fail the test (i.e., we don't generate a test failure result), we just defer the test.

3) WebCvConfig -- We only want one and only one WebCvConfig test to run at any given time on a particular 360 host.  How do we solve this problem?  The *right* answer is to *sense* our failure to use WebCvConfig because it is already being used, and then defer the test, not fail it.

In all of these cases, we're looking to the real sources of truth and not relying on our own attempts to keep track of what's being used and what isn't, which may or may not be in sync with reality.  If we process the test work collection correctly, we can make it easy to defer test work.

If we persist in the conept of test resources, I think we're going to just continue to run into problems with it.